(this["webpackJsonpz1-frontend-developer"]=this["webpackJsonpz1-frontend-developer"]||[]).push([[0],{22:function(e,t,c){},24:function(e,t,c){},33:function(e,t,c){},34:function(e,t,c){},35:function(e,t,c){},36:function(e,t,c){"use strict";c.r(t);var a=c(0),o=c.n(a),n=c(15),s=c.n(n),i=c(7),r=c(9),l=c(2),d=(c(22),c(1)),u=function(){return Object(d.jsx)("div",{className:"header",children:Object(d.jsxs)("h1",{className:"header__title",children:["Bank",Object(d.jsx)("span",{children:"c"}),"lient"]})})},m=c.p+"static/media/ID_bg.a826b8dc.svg",p=(c(24),function(e){return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("section",{className:"card-frame",children:[Object(d.jsx)("div",{className:e.outcome&&e.photo?e.isApproved?"card-frame__photo border-accepted":"card-frame__photo border-rejected":"card-frame__photo",style:{backgroundImage:"url("+(e.outcome&&e.photo?e.photo:m)+")"},title:"ID card picture",children:e.outcome&&e.photo&&e.isApproved?null:Object(d.jsx)(i.b,{to:"/cam-view",className:"card-frame__btn",onClick:function(){e.handleOutcomeValue(""),e.handleIsApprovedValue(!1),e.handlePhotoValue("")},children:e.outcome&&e.photo?"Retake picture":"Take picture"})}),e.outcome&&e.photo?Object(d.jsx)("div",{className:"card-frame__msg "+(e.isApproved?"msg-accepted":"msg-rejected"),children:Object(d.jsxs)("p",{className:"card-frame__msg--text",children:[Object(d.jsx)("i",{className:"fas "+(e.isApproved?"fa-check":"fa-times")}),e.isApproved?"Accepted":"Rejected"]})}):null]})})}),h=(c(33),function(e){return Object(d.jsxs)("div",{className:"main-view",children:[Object(d.jsx)(u,{}),Object(d.jsxs)("section",{className:"main-view__info",children:[Object(d.jsx)("h2",{className:"main-view__info--title",children:"Scan your ID"}),Object(d.jsx)("p",{className:"main-view__info--text",children:"Take a picture. It may take time to validate your personal information."})]}),Object(d.jsx)(p,{photo:e.photo,outcome:e.outcome,isApproved:e.isApproved,handleOutcomeValue:e.handleOutcomeValue,handleIsApprovedValue:e.handleIsApprovedValue,handlePhotoValue:e.handlePhotoValue})]})}),j=c(17),b=c.n(j),v=(c(34),function(e){var t=Object(a.useState)(1),c=Object(r.a)(t,2),o=c[0],n=c[1],s=Object(a.useRef)(null);Object(a.useEffect)((function(){var t=setTimeout((function(){if(!e.isApproved){var t=s.current.getScreenshot();e.handlePhotoValue(t),(c=t,fetch("https://front-exercise.z1.digital/evaluations",{method:"POST",body:JSON.stringify(c),headers:{"content-type":"application/json"}}).then((function(e){return e.json()}))).then((function(t){e.handleOutcomeValue(t.summary.outcome),e.handleIsApprovedValue(t.summary.outcome),n(o+1),console.log("API call #",o,". Response:",t.summary.outcome)}))}var c}),2e3);return function(){return clearTimeout(t)}}),[o,e]);var u=Object(l.g)();if(e.isApproved){setTimeout((function(){return u.push("/")}),2500)}return Object(d.jsxs)("div",{className:"cam-view",children:[Object(d.jsxs)("section",{className:"cam-view__info",children:[Object(d.jsx)("h2",{className:"cam-view__info--title",children:"Take picture"}),Object(d.jsxs)("p",{className:"cam-view__info--text",children:["Fit your ID card inside the frame.",Object(d.jsx)("br",{}),"The picture will be taken automatically."]})]}),Object(d.jsxs)("section",{className:"cam-view__capture",children:[Object(d.jsx)(b.a,{audio:!1,ref:s,screenshotFormat:"image/jpeg",videoConstraints:{audio:!1,width:{max:1920},height:{max:1080},aspectRatio:1.638},className:e.outcome&&e.photo?e.isApproved?"cam-view__capture--image border-accepted":"cam-view__capture--image border-rejected":"cam-view__capture--image"}),e.photo&&e.outcome&&!e.isApproved?null:Object(d.jsx)("div",{className:"cam-view__capture--msg",children:Object(d.jsxs)("p",{className:"cam-view__capture--msg text",children:[Object(d.jsx)("i",{className:"cam-view__capture--msg icon far "+(e.isApproved?"fa-check-circle":"fa-lightbulb")}),e.isApproved?"Picture taken!":"Room lighting is too low"]})}),Object(d.jsx)(i.b,{to:"/",title:"Back to home",className:"cam-view__capture--cancel-btn",onClick:function(){clearTimeout(),e.handleOutcomeValue("Cancel"),e.handleIsApprovedValue(!1),l.a},children:"Cancel"})]})]})});c(35);var O=function(){var e=m,t=Object(a.useState)(e),c=Object(r.a)(t,2),o=c[0],n=c[1],s=Object(a.useState)(""),i=Object(r.a)(s,2),u=i[0],p=i[1],j=Object(a.useState)(!1),b=Object(r.a)(j,2),O=b[0],f=b[1],x=function(e){p(e)},_=function(e){f("Approved"===e)},g=function(e){n(e)};return Object(d.jsxs)(l.d,{children:[Object(d.jsx)(l.b,{exact:!0,path:"/",children:Object(d.jsx)(h,{photo:o,outcome:u,isApproved:O,handleOutcomeValue:x,handleIsApprovedValue:_,handlePhotoValue:g})}),Object(d.jsx)(l.b,{exact:!0,path:"/cam-view",children:Object(d.jsx)(v,{photo:o,outcome:u,isApproved:O,handleOutcomeValue:x,handleIsApprovedValue:_,handlePhotoValue:g})})]})};s.a.render(Object(d.jsx)(o.a.StrictMode,{children:Object(d.jsx)(i.a,{children:Object(d.jsx)(O,{})})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.64610af2.chunk.js.map